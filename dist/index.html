<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <!-- 页面的元信息 -->
  <title>{TAG_14226_TAG}</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
  <meta name="format-detection" content="telephone=no, email=no" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="white" />
  <meta name="renderer" content="webkit" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="filetype" content="1" />
  <meta name="publishedtype" content="1" />
  <meta name="pagetype" content="2" />
  <meta name="screen-orientation" content="landscape" />
  <meta name="x5-orientation" content="landscape" />
  <meta name="full-screen" content="yes" />
  <meta name="x5-fullscreen" content="true" />
  <meta name="browsermode" content="application" />
  <meta name="x5-page-mode" content="app" />

  <!-- 页面主样式文件 -->
  <link charset="utf-8" rel="stylesheet" href="./static/css/owo.core.css">

  <!-- 附属css文件 -->
  <link rel="stylesheet" href="./static/css/main.css" charset="utf-8">

</head>

<body>
  <div class="scale-box">
    <!-- 页面[page1]-->
    <div class="page-1 page" template="page1" style="display: none;">
      <img class="so so-0" src="./static/resource/73.png">
      <img class="so so-1" src="./static/resource/342.png">
      <img class="so so-2" src="./static/resource/343.png" o-animation="shrink" go="page2//moveToLeft/moveFromRight">
      <img class="so so-3" src="./static/resource/346.jpg">
    </div>
    <!-- 页面[page2]-->
    <div class="page2 page" template="page2" style="display: none;">
      <img class="so so-0" src="./static/resource/73.png">
      <img class="so so-1" src="./static/resource/543.png" o-animation="floatUpDownSmall">
      <div class="index"></div>
      <img class="shuidi" src="./static/resource/shuidi.png">
      <div class="show-box">
        <div class="show-item show-item-1" o-tap="checkIt">
          <span>我不知道</span>
          <div class="tip"></div>
        </div>
        <div class="show-item show-item-2" o-tap="checkIt">
          <span>我不知道</span>
          <div class="tip"></div>
        </div>
        <div class="show-item show-item-3" o-tap="checkIt">
          <span>我应该知道</span>
          <div class="tip"></div>
        </div>
        <div class="show-item show-item-4" o-tap="checkIt">
          <span>我可能会知道</span>
          <div class="tip"></div>
        </div>
      </div>
      <div class="text"> </div>
    </div>
    <!-- 页面[page3]-->
    <div class="page3 page" template="page3" style="display: none;">
      <img class="so so-0" src="./static/resource/263.jpg">
      <img class="so so-1" src="./static/resource/262.png">
      <img class="so so-2 hide-to-image" src="./static/resource/162.png" o-tap="window.location.replace('')">
      <img class="so so-3 hide-to-image" src="./static/resource/167.png" o-tap="owo.script.share.switchShare()">
      <div class="number" font="HYXuJingXingKaiJ">0123456789</div>
      <div class="gold"></div>
      <img class="hide-to-image canvas-image">
      <img class="qr" src="./static/resource/qr.png">
    </div>
  </div>
  <!-- 插件[share]-->
  <div class="share-page owo-block" o-tap="hideShare" template="share" style="display: none;">
    <img class="share-img" src="./static/resource/share.png">
  </div>

  <!-- 框架script文件 -->
  <script src="./static/js/owo.core.js" type="text/javascript" charset="UTF-8"></script>
  <script type="text/javascript" charset="UTF-8">
    owo.script = {
      "page1": {
        "created": function created() {
          owo.animate('zoomIn', this.query('.so-1'), 500);
        }
      },
      "page2": {
        "data": {
          "shiti": [{
            "title": "这是第一个问题,你知道这个问题的答案是______？",
            "answer": {"我不知道": true,"我知道的": false,"我应该知道": false,"我可能会知道": false}
          }, {
            "title": "这是第2个问题,你知道这个问题的答案是______？",
            "answer": {"我知道的": false,"我应该知道": false,"我不知道": true,"我可能会知道": false}
          }, {
            "title": "这是第3个问题,你知道这个问题的答案是______？",
            "answer": {
              "我不知道": true,
              "我知道的": false,
              "我应该知道": false,
              "我可能会知道": false
            }
          }, {
            "title": "这是第4个问题,你知道这个问题的答案是______？",
            "answer": {
              "我知道的": false,
              "我不知道": true,
              "我应该知道": false,
              "我可能会知道": false
            }
          }, {
            "title": "这是第5个问题,你知道这个问题的答案是______？",
            "answer": {
              "我不知道": true,
              "我知道的": false,
              "我应该知道": false,
              "我可能会知道": false
            }
          }, {
            "title": "这是第6个问题,你知道这个问题的答案是______？",
            "answer": {
              "我不知道": true,
              "我知道的": false,
              "我应该知道": false,
              "我可能会知道": false
            }
          }, {
            "title": "这是第7个问题,你知道这个问题的答案是______？",
            "answer": {
              "我知道的": false,
              "我应该知道": false,
              "我不知道": true,
              "我可能会知道": false
            }
          }, {
            "title": "这是第8个问题,你知道这个问题的答案是______？",
            "answer": {
              "我不知道": true,
              "我知道的": false,
              "我应该知道": false,
              "我可能会知道": false
            }
          }, {
            "title": "这是第9个问题,你知道这个问题的答案是______？",
            "answer": {
              "我不知道": true,
              "我知道的": false,
              "我应该知道": false,
              "我可能会知道": false
            }
          }, {
            "title": "这是第10个问题,你知道这个问题的答案是______？",
            "answer": {
              "我不知道": true,
              "我知道的": false,
              "我应该知道": false,
              "我可能会知道": false
            }
          }, {
            "title": "这是第11个问题,你知道这个问题的答案是______？",
            "answer": {
              "我不知道": true,
              "我知道的": false,
              "我应该知道": false,
              "我可能会知道": false
            }
          }],
          "nowShiti": {},
          "gameOver": false,
          "gameIndex": 0,
          "selectShiti": [],
          "okNumber": 0
        },
        "created": function created() {
          this.xuanti();
        },
        "xuanti": function xuanti() {
          console.log('重新选题');
          this.queryAll('.show-item').forEach(function(element) {
            element.classList.remove('right-auto');
            element.classList.remove('right');
            element.classList.remove('error');
          });
          var selectNum = randomNum(0, this.data.shiti.length - 1);

          while (this.data.selectShiti.includes(selectNum)) {
            selectNum = randomNum(0, this.data.shiti.length - 1);
          }

          this.data.selectShiti.push(selectNum);
          console.log(selectNum);
          this.makeShiti(this.data.shiti[selectNum]);
          this.query('.show-box').classList.add('active-ani');
          this.data.gameOver = false;
        },
        "makeShiti": function makeShiti(shiti) {
          console.log(shiti);
          this.data.gameIndex++;
          this.data.nowShiti = shiti;
          this.query('.text').innerText = shiti.title;
          var showList = this.queryAll('.show-item span');
          var index = 0;

          for (var key in shiti.answer) {
            if (shiti.answer.hasOwnProperty(key)) {
              var element = shiti.answer[key];
              showList[index].innerText = key;
              index++;
            }
          }

          this.query('.index').innerText = this.data.gameIndex + "/10";
        },
        "checkIt": function checkIt() {
          var _this = this;

          if (this.data.gameOver) return; // 关掉动画

          this.data.gameOver = true;
          this.query('.show-box').classList.remove('active-ani');
          var selectText = this.$target.query('span').innerText; // 判断是否答对

          var nowShitiAnswer = this.data.nowShiti.answer;

          if (nowShitiAnswer[selectText]) {
            this.$target.classList.add('right');
            this.data.okNumber += 10; // 播放水滴音效

            new Audio("./static/resource/DRIP07.WAV").play();
          } else {
            this.$target.classList.add('error');
            new Audio("./static/resource/DRIP08.WAV").play();
          }

          this.query('.shuidi').classList.add('shuidi-ani'); // 水滴效果

          setTimeout(function() {
            _this.query('.shuidi').classList.remove('shuidi-ani');
          }, 2000); // 寻找正确答案

          var rightText = '';
          var rightIndex = 0;

          for (var key in nowShitiAnswer) {
            if (nowShitiAnswer.hasOwnProperty(key)) {
              var element = nowShitiAnswer[key];

              if (element) {
                rightText = key;
                break;
              } else {
                rightIndex++;
              }
            }
          } // 填写上正确答案


          console.log(rightIndex);
          this.query('.text').innerText = this.query('.text').innerText.replace('______', rightText);
          this.queryAll('.show-item')[rightIndex].classList.add('right-auto');
          setTimeout(function() {
            if (_this.data.gameIndex < 10) {
              _this.xuanti();
            } else {
              owo.go('page3//moveToLeft/moveFromRight');
            }
          }, 3000);
        }
      },
      "page3": {
        "show": function show() {
          if (owo.script.page2.data.okNumber == 100) {
            this.query('.gold').style.backgroundImage = 'url(./static/resource/gold-1.png)';
          } else if (owo.script.page2.data.okNumber == 90) {
            this.query('.gold').style.backgroundImage = 'url(./static/resource/gold-2.png)';
          }

          this.query('.number').innerText = owo.script.page2.data.okNumber;
        },
        "created": function created() {
          var _this2 = this;

          setTimeout(function() {
            html2canvas(document.body, {
              height: window.innerHeight,
              ignoreElements: function ignoreElements(element) {
                console.log(element);
                if (element.classList.contains('hide-to-image')) return true;
                else return false;
              }
            }).then(function(canvas) {
              var base64Img = canvas.toDataURL('image/jpg');
              _this2.query('.canvas-image').src = base64Img;
            });
          }, 1000);
        }
      },
      "share": {
        "created": function created() {
          if (autoScaleInfo && autoScaleInfo.hideHeight) {
            this.$el.getElementsByClassName('share-img')[0].style.top = -autoScaleInfo.hideHeight + 'px';
          }
        },
        "showShare": function showShare() {
          this.$el.style.display = 'block';
        },
        "hideShare": function hideShare() {
          this.$el.style.display = 'none';
        },
        "switchShare": function switchShare() {
          if (this.$el.style.display == 'block') {
            this.$el.style.display = 'none';
          } else {
            this.$el.style.display = 'block';
          }
        }
      }
    };
  </script>

  <script src="./static/js/autoScale.js" type="text/javascript" charset="UTF-8"></script>
  <script src="http://tools.people.com.cn/libs/jquery/1.11.1/jquery-1.11.1.min.js" type="text/javascript" charset="UTF-8"></script>
  <script src="./static/js/main.js" type="text/javascript" charset="UTF-8"></script>
  <script src="./static/js/html2canvas.js" type="text/javascript" charset="UTF-8"></script>

</body>

</html>